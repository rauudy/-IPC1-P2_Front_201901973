<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Registro</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- MATERIAL DESIGN ICONIC FONT -->
	<link rel="stylesheet" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">

	<!-- STYLE CSS -->
	<link rel="stylesheet" href="css/style.css">
</head>

<body>

	<div class="wrapper" style="background-image: url('images/bg-registration-form-1.jpg');">
		<div class="inner">
			<div class="image-holder">
				<img src="images/registration-form-1.jpg" alt="">
			</div>
			<form action="" onsubmit="return false;">
				<h3>Registrarse</h3>
				<div class="form-group">
					<input type="text" id="nombre" placeholder="Nombre" class="form-control">
					<input type="text" id="apellido" name="apellido" placeholder="Apellido" class="form-control">
				</div>
				<div class="form-wrapper">
					<input type="text" id="username" placeholder="Username" class="form-control">
					<i class="zmdi zmdi-account"></i>
				</div>
				<div class="wrap-input100 validate-input"  data-validate = "Password is required">
					<input type="password" id="pass" placeholder="Password" class="form-control">
					<i class="zmdi zmdi-lock"></i>
				</div>
				<button class="login100-form-btn" onclick="registrar()">
					Registrar
					<i class="zmdi zmdi-arrow-right"></i>
				</button>
				<div class="text-center p-t-136">
					<a class="txt2" href="../Login/login.html">
						Iniciar Sesion
						<i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
					</a>
				</div>
			</form>
		</div>
	</div>

	<script src="js/main.js"></script>
	<script>
		let headers = new Headers();
		headers.append('Content-Type', 'application/json');
		headers.append('Accept', 'application/json');
		headers.append('Access-Control-Allow-Origin', 'http://localhost:5001');
		headers.append('Access-Control-Allow-Credentials', 'true');
		headers.append('GET', 'POST', 'OPTIONS');
		function registrar(){
			//Obteniendo la data para el registro
			let nomb = document.getElementById("nombre").value;
			let apel = document.getElementById("apellido").value;
			let user = document.getElementById("username").value;
			let pass = document.getElementById("pass").value;
			//Mando a hacer la peticion
			fetch('http://localhost:5001/insertar', {
				method: 'POST',
				headers: headers,
				body: `{  
					"nombre":"${nomb}",
					"apellido":"${apel}",
					"username":"${user}",
					"password":"${pass}"
				}`,
			})
			//Aca espero a mi respuesta
			.then(response => response.json())
			//Aca yo ya trabajo con la respuesta
			.then(data => {
				alert(data.data)
				window.location.replace('../Login/login.html')
				
				
			})
			.catch((error) => {
				console.error('Error:', error);
			});

		}
		
	</script>

</body><!-- This templates was made by Colorlib (https://colorlib.com) -->
</html>